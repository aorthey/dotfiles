"3.3 (created: 2011/11/13 17:32:12)

set! browser.startup.page=1
set complete=lSf
set history=0

"stay in normal mode after changing webpage
set focuscontent

"max items for status line pop up menu
set maxitems=5
set titlestring=ffox
set visualbell
set gui=none
set wildmode=list:full

"some useful short cuts for the daily life
"noremap <C-n> <silent> :tabopen<Space>http://www.dict.cc/?s=

"youtube convert to mp3 and replay mode
noremap cy y:tabopen<Space>http://www.video2mp3.net/index.php?hq=1&url=<C-v><CR>
noremap ct y:tabopen<Space>tubereplay<Space><C-v><CR>

"quickmarks
:qmark f facebook.com
:qmark z zeit.de
:qmark t tagesschau.de
:qmark g google.com

"macro a ogmx<Tab><Return>fLogin2fungel
noremap sw :tabopen mw 
noremap sl :tabopen laasannuaire 
noremap sdd :tabopen dict 
noremap sdf :tabopen dictfr 
noremap sdr :tabopen dictfren 
noremap sds :tabopen dictes 
noremap sdi :tabopen dictit 
noremap sdl :tabopen lingueefe 
noremap sde :tabopen etymology 
noremap sf :tabopen solarmovie 
noremap gi :tabopen gimg 
noremap gm :tabopen gmap 
noremap si :tabopen gimg 
noremap sm :tabopen gmap 
noremap sgl :tabopen libgen 
noremap se :tabopen ebay 
noremap sad :tabopen amazonde 
noremap sae :tabopen amazoncom 
noremap saf :tabopen amazonfr 
noremap swd :tabopen wikigerman 
noremap swe :tabopen wikienglish 
noremap sgs :tabopen scholar 
noremap sb :tabopen dblp 
noremap sy :tabopen youtube 
noremap sk :tabopen kinox 
noremap sx :tabopen xplore 
noremap <C-r> :restart<CR>
noremap h <Esc><C-p>
noremap l <Esc><C-n>
noremap j 4j
noremap k 4k
noremap ss yt<CR>p

js <<EOM
commands.addUserCommand(
	['wait'],
	'wait for N seconds',
	function(args){
		var i=0;
                [N] = args;
		liberator.echo('N='+N);
		for(i=0;i<=N;i++){
			liberator.sleep(1000);
		}
	},
	{},
	true
);
EOM
noremap vv /vodlocker<CR><Tab><CR><Esc>:wait 1<CR>fClick<Esc>:wait 5<CR><Esc>fProceed


map <C-+> zz

"next and previous navigation by ctrl + l and h
noremap <C-l> ]]
noremap <C-h> [[

set! browser.bookmarks.max_backups=0
set! browser.cache.disk.parent_directory=~/.cache
set! browser.places.createdDefaultQueries=true

set! network.http.pipelining=true
set! network.http.proxy.pipelining=true
set! network.http.pipelining.maxrequests=8
set! network.http.max-connections=96
set! network.http.max-connections-per-server=32

noremap <F4> :source .vimperatorrc<CR>

source .vimperator/stumbleupon.js
source .vimperator/stumbleupon-friends.js
noremap st :stumble<CR>
noremap sT :tabstumble<CR>
noremap stl :thumbup<CR>
noremap stn :thumbdown<CR>

"minimize
js <<EOM
    commands.addUserCommand(['mi[nimize]'], "minimize window",
    function(){
        minimize();
    }, {}, true);
EOM

noremap zm :minimize<CR>

autocmd LocationChange .* :set editor="gnome-terminal -x vim"
js <<EOM

function set_proxy(host, port){
	liberator.execute('set! network.proxy.socks='+host);
	liberator.execute('set! network.proxy.socks_port='+port);
	liberator.execute('set! network.proxy.share_proxy_settings=true');
	liberator.execute('set! network.proxy.type=1');
        liberator.execute('!ssh -f -D '+port+' aorthey@homepages.laas.fr -N');
}

commands.addUserCommand(['proxy'],
    'Set the proxy',
    function (args){
        liberator.execute('!pkill -f ssh.*9999');
        switch (args.length) {
            case 0:
                liberator.echo(get_proxy_string());
                break;
            case 1:
                [host] = args;
                port = 9999;
                set_proxy(host, port);
                break;
            case 2:
                [host, port] = args;
                set_proxy(host, port);
                break;
            default:
                liberator.echo('proxy host port')
        }
	liberator.echo('set proxy to '+host+' '+port);
    },
    {}, true);

commands.addUserCommand(['noproxy'],
    'Disable all proxies',
    function (args) {
        liberator.execute('!pkill -f ssh.*9999');
        liberator.execute('set! network.proxy.type=0');
	liberator.echo("disabled proxies");
    },
    {},
    true
);

EOM
noremap sp :proxy localhost 9999<CR>
noremap sn :noproxy<CR>
